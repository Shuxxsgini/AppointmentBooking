<!DOCTYPE html>
<html>
<head>
  <title>Appointment Scheduler</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #000;
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    form {
      background: #111;
      padding: 20px;
      border-radius: 10px;
      max-width: 400px;
      margin: auto;
      box-shadow: 0px 0px 10px #fff;
    }
    label { display: block; margin-top: 10px; }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #fff;
      background: #000;
      color: #fff;
      border-radius: 5px;
    }
    button {
      margin-top: 15px;
      padding: 10px;
      background: #fff;
      color: #000;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover { background: #ccc; }
  </style>
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    (function() {
      emailjs.init("YOUR_PUBLIC_KEY"); // Replace with your EmailJS public key
    })();

    let bookedSlots = {};

    function generateTimeSlots() {
      let select = document.getElementById("time");
      select.innerHTML = "";
      let times = [];
      for (let hour = 9; hour <= 17; hour++) {
        times.push(`${hour}:00`);
        times.push(`${hour}:30`);
      }
      times.forEach(time => {
        let opt = document.createElement("option");
        opt.value = time;
        opt.textContent = time;
        select.appendChild(opt);
      });
    }

    function bookAppointment(e) {
      e.preventDefault();

      let date = document.getElementById("date").value;
      let time = document.getElementById("time").value;
      let name = document.getElementById("name").value;
      let location = document.getElementById("location").value;
      let phone = document.getElementById("phone").value;
      let email = document.getElementById("email").value;

      if (!date || !time || !name || !location || !phone || !email) {
        alert("Please fill all fields");
        return;
      }

      if (!bookedSlots[date]) bookedSlots[date] = [];
      if (bookedSlots[date].includes(time)) {
        alert("This slot is already booked. Please choose another.");
        return;
      }

      bookedSlots[date].push(time);
      let meetLink = "https://meet.google.com/" + Math.random().toString(36).substring(2,7);

      let details = `
        Appointment Details:
        Name: ${name}
        Location: ${location}
        Phone: ${phone}
        Email: ${email}
        Date: ${date}
        Time: ${time}
        Meeting Link: ${meetLink}
      `;

      // Send email to user
      emailjs.send("service_lku228c", "template_wrguzjx", {
        to_email: email,
        subject: "Your Appointment Confirmation",
        message: details
      });

      // Send email to admin emails
      ["kumarishubhangini9440@gmail.com", "sanskarpani97@gmail.com"].forEach(adminEmail => {
        emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
          to_email: adminEmail,
          subject: "New Appointment Booked",
          message: details
        });
      });

      alert("Appointment booked successfully! Confirmation sent to email.");
      document.getElementById("appointmentForm").reset();
    }

    window.onload = generateTimeSlots;
  </script>
</head>
<body>
  <h1>Book Your Appointment</h1>
  <form id="appointmentForm" onsubmit="bookAppointment(event)">
    <label>Date:</label>
    <input type="date" id="date" required>

    <label>Time:</label>
    <select id="time" required></select>

    <label>Name:</label>
    <input type="text" id="name" required>

    <label>Location:</label>
    <input type="text" id="location" required>

    <label>Phone:</label>
    <input type="tel" id="phone" required>

    <label>Email:</label>
    <input type="email" id="email" required>

    <button type="submit">Book Appointment</button>
  </form>
</body>
</html>
